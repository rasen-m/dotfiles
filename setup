#!/bin/bash

################################################################################
# Reference.
################################################################################
# https://unix.stackexchange.com/questions/71253/what-should-shouldnt-go-in-zshenv-zshrc-zlogin-zprofile-zlogout
# https://ohmyz.sh

################################################################################
# Git.
################################################################################
echo "Copying git files..."

cp git/.gitignore ~

git config --global core.excludesfile ~/.gitignore
git config --global core.editor vim
git config --global color.ui auto
git config --global user.name "Sean Su"
git config --global user.email "seansu@me.com"
git config --global help.autocorrect 20
git config --global push.default current

# Aliases
git config --global alias.st "status"
git config --global alias.co "checkout"
git config --global alias.a "add"
git config --global alias.p "pull"
git config --global alias.c "commit"
git config --global alias.d "diff --no-index"

git config --global alias.b "branch"
git config --global alias.ba "branch -a"
git config --global alias.br "branch -r"

git config --global alias.l "log"
git config --global alias.lo "log --oneline"
git config --global alias.ll "log --graph --decorate --oneline --abbrev-commit --all"

################################################################################
# Vim.
################################################################################
echo "Setting up vim..."

cp -R vim/.vim ~
cp vim/.vimrc ~

if [ ! -d $HOME/.vim/bundle ]; then
    mkdir ~/.vim/bundle
fi

if [ ! -d $HOME/.vim/bundle/Vundle.vim ]; then
    git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim
fi

if [ ! -d $HOME/.vimtmp ]; then
    mkdir ~/.vimtmp
fi

# https://github.com/VundleVim/Vundle.vim
vim +PluginInstall +qall

################################################################################
# Color.
################################################################################
if [[ $(uname) == 'Darwin' || $(uname) == 'Linux' ]]; then
    echo "Setting up color..."

    if [[ "$uname" == 'Darwin' ]]; then
        echo "Run 'solarized_dark_osx_setup.terminal' and set that as default settings."
    fi
fi

################################################################################
# Powerline Font.
################################################################################
if [[ $(uname) == 'Darwin' || $(uname) == 'Linux' ]]; then
    echo "Setting up font..."

    if [[ $(uname) == 'Linux' ]]; then
        sudo apt install fonts-firacode
        echo "If on Window Linux Subsystem, the fonts got to be setup on the Window side instead."
        echo "Right-click on the WSL terminal's title-bar > Settings > ..."
        echo "Also, set the Color scheme to 'Solarized Dark'."

        echo "If this is on a Windows WSL and the color isn't showing, check out gitbash_solarized."
    elif [[ $(uname) == 'Darwin' ]]; then
        brew tap homebrew/cask-fonts
        brew install --cask font-fira-code
        echo "Run 'Solarized Dark (Powerline).terminal' and set that as default settings."
    fi
fi

################################################################################
# Oh My Zsh.
################################################################################
if [[ $(uname) == 'Darwin' || $(uname) == 'Linux' ]]; then
    echo "Setting up Oh My Zsh..."

    # Download
    sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

    # Spaceship theme.
    # https://github.com/spaceship-prompt/spaceship-prompt
    # https://github.com/ohmyzsh/ohmyzsh/wiki/External-themes
    # https://spaceship-prompt.sh
    if [[ "$uname" == 'Linux' ]]; then
        git clone https://github.com/spaceship-prompt/spaceship-prompt.git "$ZSH_CUSTOM/themes/spaceship-prompt" --depth=1
    elif [[ "$uname" == 'Darwin' ]]; then
        brew install spaceship
    fi

    # Custom files.
    cp oh-my-zsh/spaceshiprc.zsh ~/.spaceshiprc.zsh
    cp oh-my-zsh/aliases.zsh ~/.oh-my-zsh/custom
    cp oh-my-zsh/paths.zsh ~/.oh-my-zsh/custom
fi
